"use strict";(self.webpackChunknew_infra_labs_docs=self.webpackChunknew_infra_labs_docs||[]).push([[2971],{8366:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>i,contentTitle:()=>a,default:()=>o,frontMatter:()=>l,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"architecture/iaas","title":"Infra Labs IaaS \u67b6\u69cb","description":"\u524d\u8a00","source":"@site/docs/architecture/iaas.md","sourceDirName":"architecture","slug":"/architecture/iaas","permalink":"/docs/architecture/iaas","draft":false,"unlisted":false,"editUrl":"https://github.com/cloud-native-taiwan/Infra-Labs-Docs/tree/main/docs/architecture/iaas.md","tags":[],"version":"current","frontMatter":{},"sidebar":"architecture","previous":{"title":"Infra Labs \u7db2\u8def\u67b6\u69cb","permalink":"/docs/architecture/network"},"next":{"title":"Admin \u5c08\u5340","permalink":"/docs/category/admin-\u5c08\u5340"}}');var r=s(4848),c=s(8453);const l={},a="Infra Labs IaaS \u67b6\u69cb",i={},d=[{value:"\u524d\u8a00",id:"\u524d\u8a00",level:2},{value:"\u67b6\u69cb\u6982\u89bd",id:"\u67b6\u69cb\u6982\u89bd",level:2},{value:"\u786c\u9ad4",id:"\u786c\u9ad4",level:2},{value:"\u8edf\u9ad4",id:"\u8edf\u9ad4",level:2},{value:"\u4e3b\u6a5f\u89d2\u8272\u5206\u914d",id:"\u4e3b\u6a5f\u89d2\u8272\u5206\u914d",level:3},{value:"OpenStack \u670d\u52d9",id:"openstack-\u670d\u52d9",level:3},{value:"Ceph \u670d\u52d9",id:"ceph-\u670d\u52d9",level:3}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"infra-labs-iaas-\u67b6\u69cb",children:"Infra Labs IaaS \u67b6\u69cb"})}),"\n",(0,r.jsx)(n.h2,{id:"\u524d\u8a00",children:"\u524d\u8a00"}),"\n",(0,r.jsx)(n.p,{children:"Infra Labs \u900f\u904e OpenStack \u548c Ceph \u4f86\u63d0\u4f9b Infrastructure as a Service (IaaS) \u670d\u52d9\u3002IaaS \u5141\u8a31\u4f7f\u7528\u8005\u900f\u904e\u7db2\u8def\u4ee5\u7a0b\u5f0f\u5316\u7684\u65b9\u5f0f\u4f48\u5efa\u904b\u7b97\u3001\u7db2\u8def\u548c\u5132\u5b58\u8cc7\u6e90\uff0c\u800c\u7121\u9700\u8cfc\u8cb7\u3001\u7ba1\u7406\u548c\u7dad\u8b77\u5be6\u9ad4\u4f3a\u670d\u5668\u548c\u57fa\u790e\u8a2d\u65bd\u3002"}),"\n",(0,r.jsx)(n.p,{children:"OpenStack \u662f\u4e00\u500b\u958b\u6e90\u7684\u96f2\u7aef\u904b\u7b97\u7ba1\u7406\u5e73\u53f0\uff0c\u63d0\u4f9b\u4e86\u4e00\u5957\u5de5\u5177\u4f86\u7ba1\u7406\u904b\u7b97\u3001\u7db2\u8def\u548c\u5132\u5b58\u8cc7\u6e90\u3002Ceph \u662f\u4e00\u500b\u958b\u6e90\u7684\u5206\u6563\u5f0f\u5132\u5b58\u7cfb\u7d71\uff0c\u53ef\u63d0\u4f9b\u9ad8\u53ef\u9760\u6027\u548c\u53ef\u64f4\u5c55\u6027\u7684\u7269\u4ef6\u3001\u5340\u584a\u548c\u6a94\u6848\u5132\u5b58\u3002"}),"\n",(0,r.jsxs)(n.p,{children:["\u672c\u6587\u5c07\u4ecb\u7d39 Infra Labs \u7684 OpenStack \u548c Ceph \u67b6\u69cb\uff0c\u5305\u62ec\u4f7f\u7528\u7684\u5143\u4ef6\u3001\u786c\u9ad4\u898f\u683c\u3001\u7db2\u8def\u62d3\u64b2\u548c\u81ea\u8a02\u8a2d\u5b9a\u3002\u8a73\u7d30\u8a2d\u5b9a\u6a94\u516c\u958b\u65bc ",(0,r.jsx)(n.a,{href:"https://github.com/cloud-native-taiwan/Infra-Labs-Config",children:"Infra-Labs-Config repository"}),"\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"\u67b6\u69cb\u6982\u89bd",children:"\u67b6\u69cb\u6982\u89bd"}),"\n",(0,r.jsx)(n.p,{children:"\u4e0a\u5716\u5c55\u793a\u4e86 Infra Labs IaaS \u7684\u9ad8\u5c64\u67b6\u69cb\u3002\u4f7f\u7528\u8005\u900f\u904e Horizon \u7db2\u9801\u4ecb\u9762\u6216 OpenStack API \u8207\u670d\u52d9\u4e92\u52d5\u3002API \u8acb\u6c42\u88ab\u767c\u9001\u5230\u5c0d\u61c9\u7684 OpenStack \u670d\u52d9\uff0c\u9019\u4e9b\u670d\u52d9\u5354\u8abf\u904b\u7b97\u7bc0\u9ede (\u900f\u904e Nova)\u3001\u7db2\u8def\u8cc7\u6e90 (\u900f\u904e Neutron) \u548c\u5132\u5b58 (\u900f\u904e Cinder\u3001Glance\u3001Swift)\u3002"}),"\n",(0,r.jsx)(n.p,{children:"Ceph \u63d0\u4f9b\u4e86\u9ad8\u53ef\u9760\u6027\u7684\u5340\u584a\u5132\u5b58 (\u900f\u904e RBD) \u7d66 Nova\u3001Cinder \u548c Glance \u4f7f\u7528\uff0c\u4ee5\u53ca\u7269\u4ef6\u5132\u5b58 (\u900f\u904e RGW) \u7d66 Swift \u4f7f\u7528\u3002"}),"\n",(0,r.jsx)(n.p,{children:"MariaDB \u5132\u5b58\u4e86 OpenStack \u670d\u52d9\u7684\u72c0\u614b\u548c\u5143\u8cc7\u6599\uff0c\u800c RabbitMQ \u5247\u8ca0\u8cac\u670d\u52d9\u9593\u7684\u8a0a\u606f\u50b3\u905e\u3002Keepalived \u548c HAProxy \u63d0\u4f9b\u4e86\u9ad8\u53ef\u7528\u6027\u7684 API \u7aef\u9ede\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"\u786c\u9ad4",children:"\u786c\u9ad4"}),"\n",(0,r.jsx)(n.p,{children:"Infra Labs \u4f7f\u7528\u4e86 6 \u53f0\u4f3a\u670d\u5668\u4f86\u63d0\u4f9b IaaS \u670d\u52d9\uff1a"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Hostname"}),(0,r.jsx)(n.th,{children:"CPU"}),(0,r.jsx)(n.th,{children:"RAM"}),(0,r.jsx)(n.th,{children:"NIC"}),(0,r.jsx)(n.th,{children:"Boot Disk"}),(0,r.jsx)(n.th,{children:"Ceph Disk"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"openstack01-02"}),(0,r.jsx)(n.td,{children:"AMD Epyc Rome 7282 * 2"}),(0,r.jsx)(n.td,{children:"32GB DDR4 2933MHz ECC RDIMM * 16"}),(0,r.jsx)(n.td,{children:"On-board dual port 1GbE, Mellanox ConnectX-4 Lx dual port 25GbE"}),(0,r.jsx)(n.td,{children:"Intel 730 240GB or Sandisk CloudSpeed Eco Gen II 480GB"}),(0,r.jsx)(n.td,{children:"KIOXIA CD6 3.84TB, Intel DC S3500 1.6TB"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"openstack04-05"}),(0,r.jsx)(n.td,{children:"AMD Epyc Milan 7413"}),(0,r.jsx)(n.td,{children:"32GB DDR4 3200MHz ECC RDIMM * 8"}),(0,r.jsx)(n.td,{children:"On-board quad port 1GbE, Mellanox ConnectX-4 Lx dual port 25GbE"}),(0,r.jsx)(n.td,{children:"Seagate Enterprise Performance 15K 900GB * 2"}),(0,r.jsx)(n.td,{children:"Samsung NGSFF PM983 3.84TB, Intel DC S3500 1.6TB (openstack05 only), Seagate X18 16TB * 2"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"openstack06"}),(0,r.jsx)(n.td,{children:"Xeon Silver 4110"}),(0,r.jsx)(n.td,{children:"32GB DDR4 2666MHz ECC RDIMM * 6"}),(0,r.jsx)(n.td,{children:"On-board dual port 1GbE, Mellanox ConnectX-4 Lx dual port 25GbE"}),(0,r.jsx)(n.td,{children:"Intel S3500 120GB * 2"}),(0,r.jsx)(n.td,{children:"Seagate X18 16TB * 2"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"arm01"}),(0,r.jsx)(n.td,{children:"Ampere Altra Q80-30 * 2"}),(0,r.jsx)(n.td,{children:"32GB DDR4 3200MHz ECC RDIMM * 4"}),(0,r.jsx)(n.td,{children:"On-board dual port 1GbE, Mellanox ConnectX-4 Lx dual port 25GbE"}),(0,r.jsx)(n.td,{children:"Samsung PM9A3 512GB"}),(0,r.jsx)(n.td,{children:"N/A"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"\u8edf\u9ad4",children:"\u8edf\u9ad4"}),"\n",(0,r.jsx)(n.h3,{id:"\u4e3b\u6a5f\u89d2\u8272\u5206\u914d",children:"\u4e3b\u6a5f\u89d2\u8272\u5206\u914d"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["OpenStack \u63a7\u5236\u7bc0\u9ede\uff1a",(0,r.jsx)(n.code,{children:"openstack01,02,04"})]}),"\n",(0,r.jsxs)(n.li,{children:["OpenStack \u904b\u7b97\u7bc0\u9ede\uff1a",(0,r.jsx)(n.code,{children:"openstack01,02,04,05,arm01"})]}),"\n",(0,r.jsxs)(n.li,{children:["Ceph \u63a7\u5236\u7bc0\u9ede\uff1a",(0,r.jsx)(n.code,{children:"openstack01,02,04"})]}),"\n",(0,r.jsxs)(n.li,{children:["Ceph OSD \u7bc0\u9ede\uff1a",(0,r.jsx)(n.code,{children:"openstack01,02,03,04"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"openstack-\u670d\u52d9",children:"OpenStack \u670d\u52d9"}),"\n",(0,r.jsx)(n.p,{children:"Infra Labs \u4f7f\u7528\u4ee5\u4e0b OpenStack \u670d\u52d9\uff1a"}),"\n",(0,r.jsx)(n.p,{children:"\u90e8\u7f72\u5de5\u5177\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://docs.openstack.org/bifrost/latest/",children:"Bifrost"}),"\uff1a\u88f8\u6a5f\u90e8\u7f72"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://docs.openstack.org/kolla/latest/",children:"Kolla"}),"\uff1a\u5bb9\u5668\u5316 OpenStack \u670d\u52d9"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://docs.openstack.org/kolla-ansible/latest/",children:"Kolla-Ansible"}),"\uff1a\u4f7f\u7528 Ansible \u90e8\u7f72 Kolla"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://docs.openstack.org/diskimage-builder/latest/",children:"Diskimage-builder"}),"\uff1a\u5efa\u7acb\u5ba2\u88fd\u5316\u7684 OS \u6620\u50cf\u6a94"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u6838\u5fc3\u670d\u52d9\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://docs.openstack.org/nova/latest/",children:"Nova"}),"\uff1a\u904b\u7b97\uff08\u865b\u64ec\u6a5f\u3001\u88f8\u6a5f\uff09"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://docs.openstack.org/neutron/latest/",children:"Neutron"}),"\uff1a\u7db2\u8def"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://docs.openstack.org/keystone/latest/",children:"Keystone"}),"\uff1a\u8eab\u4efd\u9a57\u8b49"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://docs.openstack.org/glance/latest/",children:"Glance"}),"\uff1a\u6620\u50cf\u6a94"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://docs.openstack.org/cinder/latest/",children:"Cinder"}),"\uff1a\u5340\u584a\u5132\u5b58"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://docs.openstack.org/swift/latest/",children:"Swift"}),"\uff1a\u7269\u4ef6\u5132\u5b58"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://docs.openstack.org/placement/latest/",children:"Placement"}),"\uff1a\u8cc7\u6e90\u5eab\u5b58\u548c\u4f7f\u7528\u91cf\u8ffd\u8e64"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u5176\u4ed6\u670d\u52d9\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://docs.openstack.org/heat/latest/",children:"Heat"}),"\uff1a\u5354\u8abf\u591a\u500b OpenStack \u670d\u52d9\u4f86\u90e8\u7f72\u61c9\u7528\u7a0b\u5f0f"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://docs.openstack.org/designate/latest/",children:"Designate"}),"\uff1aDNS \u5373\u670d\u52d9"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://docs.openstack.org/octavia/latest/",children:"Octavia"}),"\uff1a\u8ca0\u8f09\u5e73\u8861\u5373\u670d\u52d9"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://docs.openstack.org/horizon/latest/",children:"Horizon"}),"\uff1aWeb UI"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"ceph-\u670d\u52d9",children:"Ceph \u670d\u52d9"}),"\n",(0,r.jsxs)(n.p,{children:["Ceph \u4f7f\u7528 ",(0,r.jsx)(n.a,{href:"https://docs.ceph.com/en/latest/cephadm/index.html",children:"Cephadm"})," \u90e8\u7f72\uff0c\u5f8c\u7aef\u7db2\u8def\u4f7f\u7528 25GbE \u7db2\u5361\u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\u63d0\u4f9b\u7684\u670d\u52d9\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"RBD\uff1a\u70ba Nova\u3001Cinder\u3001Glance \u63d0\u4f9b\u5340\u584a\u5132\u5b58"}),"\n",(0,r.jsx)(n.li,{children:"RGW\uff1a\u70ba Swift \u63d0\u4f9b\u7269\u4ef6\u5132\u5b58\uff0c\u4e26\u900f\u904e Keystone \u8a8d\u8b49\u63d0\u4f9b S3 \u76f8\u5bb9 API"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u76ee\u524d Crush Rule \u5305\u62ec\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"replicated_nvme"}),"\uff1a\u4f7f\u7528 NVMe SSD"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"replicated_sata_ssd"}),"\uff1a\u4f7f\u7528 SATA SSD"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"replicated_hdd"}),"\uff1a\u4f7f\u7528 HDD"]}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>a});var t=s(6540);const r={},c=t.createContext(r);function l(e){const n=t.useContext(c);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(c.Provider,{value:n},e.children)}}}]);